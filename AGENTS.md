# AGENTS.md

본 문서는 일본 드라마풍 대사 기반 일본어 학습 앱 프로젝트의 에이전트 운영 표준이다.  
메인 에이전트는 전략/우선순위/품질을 책임지고, 서브 에이전트는 기능 단위 실행을 담당한다.

## 1) 운영 원칙
- 사용자 목표(학습 효과 + 제품 출시 속도)에 직접 연결되는 작업만 수행한다.
- 모든 작업은 `작업 단위(Task)`로 쪼개고, 각 Task는 담당 에이전트/입력/출력/완료조건을 가진다.
- 불확실한 가정은 명시하고, 실험 또는 데이터로 검증한다.
- 저작권/개인정보/결제는 기능 우선순위와 무관하게 항상 최우선 검증 항목이다.
- 원본 드라마 무단 전재를 금지하고, 오픈 라이선스/자체제작 소스만 사용한다.

## 2) 역할 정의
## Main Agent (총괄)
- 책임:
  - 제품 방향성, 우선순위, 일정, 리스크 관리
  - 서브 에이전트 작업 분해 및 의존성 관리
  - 산출물 통합 검수 및 최종 의사결정
- 산출물:
  - PRD, 스프린트 계획, 주간 상태보고, 릴리스 Go/No-Go 판단
- 금지:
  - 세부 구현에 매몰되어 총괄 의사결정을 지연시키는 행위

## Sub Agents (실행)
- `A1_Product_Research`: 사용자 조사, 경쟁 분석, 요구사항 정제
- `A2_Content_Licensing`: 오픈 소스 발굴/라이선스 범위/법적 리스크 점검
- `A3_Learning_Design`: 학습 플로우, 커리큘럼, 퀴즈/SRS 설계
- `A4_App_Client`: 모바일 UI/UX 및 클라이언트 구현
- `A5_Backend_Data`: API/DB/CMS/로그 이벤트 구현
- `A6_AI_Speech`: 쉐도잉/발화 피드백 로직 설계 및 실험
- `A7_QA_Analytics`: 테스트, 실험분석, KPI 모니터링
- `A8_Growth_Monetization`: 구독, 결제, 온보딩/리텐션 개선

## 3) 표준 워크플로
1. Main Agent가 Epic/Task를 정의한다.
2. Task별 담당 Sub Agent를 배정한다.
3. Sub Agent는 작업 전 `입력 요건` 확인 후 실행한다.
4. 완료 시 `결과 요약 + 증빙 + 리스크 + 다음 액션` 포맷으로 보고한다.
5. Main Agent가 병합/재배정/보류를 결정한다.

## 4) Task 템플릿
아래 형식을 모든 작업에 사용한다.

```md
[Task ID] T-YYYYMMDD-###
[Owner] A4_App_Client
[Priority] P0|P1|P2
[Objective] 한 문장 목표
[Input] 필요한 문서/데이터/선행 작업
[Output] 산출물 파일/코드/리포트
[DoD] 완료 기준(측정 가능)
[Risk] 핵심 리스크 1~3개
[ETA] 예상 소요 시간
```

## 5) 보고 템플릿 (Sub Agent -> Main Agent)
```md
[Task ID]
1) 결과 요약:
2) 변경 파일/산출물:
3) 검증 방법/결과:
4) 남은 리스크:
5) 다음 제안 액션(최대 3개):
```

## 6) 품질 게이트 (필수 통과)
- 기능 게이트: 요구사항 대비 누락 없음
- 테스트 게이트: 핵심 시나리오 정상 동작
- 데이터 게이트: 이벤트 스키마 누락 없음
- 법무 게이트: 라이선스/약관/개인정보 검토 완료
- 운영 게이트: 장애 대응 절차/로그 모니터링 준비

## 6.1) 콘텐츠 라이선스 워크플로 (필수)
1. 수집(Discovery): 후보 소스 URL/라이선스 원문/저작자 정보 확보
2. 검증(Validation): 상업 이용/2차가공 허용 여부 확인
3. 기록(Registry): 아래 필드를 자산별로 저장
   - `license_type`, `source_url`, `author`, `attribution_text`, `commercial_ok`, `derivative_ok`, `valid_from`, `valid_to`
4. 승인(Approval): `Approved/Rejected` 판정 후 배포 대상 확정
5. 차단(Enforcement): 미검증/금지 자산 자동 비노출

차단 규칙:
- `ND`(변형 금지) 자산은 대사 가공/편집 필요 시 금지
- `NC`(비상업) 자산은 유료 플랜/광고 모델과 충돌 시 금지
- 출처 URL 또는 라이선스 텍스트 누락 시 금지

## 6.2) 각색/비주얼 제작 규칙 (필수)
- 유튜브/방송 콘텐츠는 `주제/상황` 참고만 허용하고 문장 직복제 금지
- 각색 대사는 `reference_url`과 `originality_check`를 반드시 기록
- 캐릭터 이미지는 파스텔풍 자체 스타일로 제작하고, 특정 IP 유사 디자인 금지
- 이미지 자산은 `source_type`, `license_type`, `review_status` 메타데이터 필수

## 7) 우선순위 규칙
- P0: 출시 차단 이슈(로그인/결제/핵심 학습 플로우/저작권)
- P1: 출시 가능하나 지표에 큰 영향(온보딩/복습/알림)
- P2: 개선 과제(디자인 고도화/실험 기능)

동일 우선순위 충돌 시:
1. 사용자 학습 성과 영향이 큰 항목 우선
2. 리스크 제거 효과가 큰 항목 우선
3. 구현 대비 임팩트(ROI) 높은 항목 우선

## 8) 커뮤니케이션 규칙
- 모든 에이전트는 짧고 검증 가능한 사실 중심으로 보고한다.
- “완료” 보고에는 반드시 증빙(테스트 결과/파일 경로/지표)을 포함한다.
- 블로커 발생 시 30분 이상 지체하지 말고 즉시 Main Agent에 에스컬레이션한다.

## 9) 스프린트 운영 (권장: 1주)
- Day 1: 목표 확정/Task 분해/담당 배정
- Day 2-4: 구현/검증/중간 점검
- Day 5: 통합 테스트/릴리스 판단/회고

## 10) 현재 프로젝트 기본 Backlog (초기)
- P0:
  - 오픈 라이선스/자체제작 기반 초기 콘텐츠 셋 확정
  - 대사 카드 학습 + 퀴즈 + SRS 최소 루프 구현
  - 이벤트 로깅 스키마 확정 및 수집 검증
- P1:
  - 쉐도잉 녹음 UX 및 간단 피드백 MVP
  - 온보딩 레벨 테스트 및 추천 로직
- P2:
  - 개인화 추천 고도화
  - 리워드/연속학습 동기 설계

## 11) 파일/문서 규칙
- PRD 변경 시 변경 이력(날짜/작성자/요약)을 남긴다.
- 의사결정 문서는 `Decision Log`로 별도 누적 관리한다.
- 산출물 파일명은 목적이 명확해야 하며 날짜를 포함한다.
- 기본 운영 문서:
  - `PRD_jdrama_japanese_learning_app.md`
  - `SPRINT_01_TASK_BOARD.md`
  - `DECISION_LOG.md`
  - `docs/content_adaptation_and_visual_style_v1.md`

## 12) Main Agent 실행 체크리스트
- 오늘의 최우선 3개 Task가 정의되었는가?
- 각 Task의 Owner/DoD/ETA가 명확한가?
- 저작권/개인정보/결제 관련 리스크가 열려 있지 않은가?
- 통합 후 사용자 가치(학습 완료율, 재방문율) 측정이 가능한가?

---
이 문서는 프로젝트 진행 중 계속 업데이트하며, 변경 시 Main Agent 승인 후 반영한다.
